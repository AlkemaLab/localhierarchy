[{"path":"https://alkemalab.github.io/localhierarchy/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 localhierarchy authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/articles/localhierarchy_article.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"localhierarchy_article","text":"bla","code":""},{"path":"https://alkemalab.github.io/localhierarchy/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Leontine Alkema. Author, maintainer. Shauna Mooney. Author. Evan Ray. Author. Herbert Susmann. Author.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Alkema L, Mooney S, Ray E, Susmann H (2025). localhierarchy: R package facilitate fitting global local Bayesian hierarchical models. R package version 0.9, https://alkemalab.github.io/localhierarchy/.","code":"@Manual{,   title = {localhierarchy: An R package to facilitate fitting of global and local Bayesian hierarchical models},   author = {Leontine Alkema and Shauna Mooney and Evan Ray and Herbert Susmann},   year = {2025},   note = {R package version 0.9},   url = {https://alkemalab.github.io/localhierarchy/}, }"},{"path":[]},{"path":"https://alkemalab.github.io/localhierarchy/index.html","id":"background","dir":"","previous_headings":"","what":"Background","title":"An R package to facilitate fitting of global and local Bayesian hierarchical models","text":"Bayesian hierarchical models widely used global health estimation, data availability may vary across national subnational populations. models typically fitted global database, e.g., produce national-level estimates countries world region. facilitate analysis local level, models often desirable informed global models can fitted just subset data, data one country. refer models local models: models derived global hierarchical models adapted can fitted data one population alone. localhierarchy R package provides functionality fitting Bayesian hierarchical models settings global local estimation required. package provides R functions Stan model components support global modeling, parameters hierarchical models estimated, local modeling, parameters estimated one small number populations, using fixed values global model fit. article website presents practical introduction package applied user illustrates package’s functionality examples national estimation.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"An R package to facilitate fitting of global and local Bayesian hierarchical models","text":"localhierarchy depends cmdstanr: Instructions installing cmdstanr available Getting started guide. Install localhierarchy Github: remotes::install_github(\"AlkemaLab/localhierarchy\")","code":""},{"path":"https://alkemalab.github.io/localhierarchy/index.html","id":"examples","dir":"","previous_headings":"","what":"Examples","title":"An R package to facilitate fitting of global and local Bayesian hierarchical models","text":"See article.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"An R package to facilitate fitting of global and local Bayesian hierarchical models","text":"Please cite follows:","code":"citation(\"localhierarchy\") #> To cite package 'localhierarchy' in publications use: #>  #>   Alkema L, Mooney S, Ray E, Susmann H (2025). _localhierarchy: An R #>   package to facilitate fitting of global and local Bayesian #>   hierarchical models_. R package version 0.9, #>   <https://alkemalab.github.io/localhierarchy/>. #>  #> A BibTeX entry for LaTeX users is #>  #>   @Manual{, #>     title = {localhierarchy: An R package to facilitate fitting of global and local Bayesian #> hierarchical models}, #>     author = {Leontine Alkema and Shauna Mooney and Evan Ray and Herbert Susmann}, #>     year = {2025}, #>     note = {R package version 0.9}, #>     url = {https://alkemalab.github.io/localhierarchy/}, #>   }"},{"path":"https://alkemalab.github.io/localhierarchy/reference/check_nas.html","id":null,"dir":"Reference","previous_headings":"","what":"Check for missing values — check_nas","title":"Check for missing values — check_nas","text":"function checks NAs specified column data frame.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/check_nas.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check for missing values — check_nas","text":"","code":"check_nas(data, column)"},{"path":"https://alkemalab.github.io/localhierarchy/reference/check_nas.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check for missing values — check_nas","text":"data tibble data frame column column check NAs","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/check_nas.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check for missing values — check_nas","text":"stops NAs column column exist","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/create_a_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a matrix — create_a_matrix","title":"Create a matrix — create_a_matrix","text":"function takes postsumm object returns matrix relevant information","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/create_a_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a matrix — create_a_matrix","text":"","code":"create_a_matrix(post_summ)"},{"path":"https://alkemalab.github.io/localhierarchy/reference/create_a_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a matrix — create_a_matrix","text":"post_summ tibble columns variable postmean, variable examples [1,1], [2,1], etc.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/create_a_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a matrix — create_a_matrix","text":"matrix rows columns corresponding indices variable","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/extract_parameter_subhierarchical.html","id":null,"dir":"Reference","previous_headings":"","what":"extract_parameter_subhierarchical — extract_parameter_subhierarchical","title":"extract_parameter_subhierarchical — extract_parameter_subhierarchical","text":"extract_parameter_subhierarchical","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/extract_parameter_subhierarchical.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"extract_parameter_subhierarchical — extract_parameter_subhierarchical","text":"","code":"extract_parameter_subhierarchical(   hierarchical_data,   subhierarchy,   parname,   star_samples,   morethan1param = FALSE,   add_standardizedmu = FALSE )"},{"path":"https://alkemalab.github.io/localhierarchy/reference/extract_parameter_subhierarchical.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"extract_parameter_subhierarchical — extract_parameter_subhierarchical","text":"hierarchical_data hierarchical_data, obtained hierarchical_data(fit$geo_unit, fit$hierarchical_level) subhierarchy selected hierarchical_level (example: \"intercept\" \"region\") parname selected parameter name (example: \"mu\") star_samples samples fit$samples parname_star morethan1param parname refer 1 parameter (vector)","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/extract_parameter_subhierarchical.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"extract_parameter_subhierarchical — extract_parameter_subhierarchical","text":"tibble posterior samples selected parameter mu subhierarchy level. mus obtained summing relevant etas variables name, value, .draw/iteration/chain' k` referring parameter index morethan1param = TRUE","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/fit_model_localhierarchy.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit localhierarchy example model — fit_model_localhierarchy","title":"Fit localhierarchy example model — fit_model_localhierarchy","text":"function fits localhierarchy example model","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/fit_model_localhierarchy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit localhierarchy example model — fit_model_localhierarchy","text":"","code":"fit_model_localhierarchy(   survey_df,   y = \"y\",   area = \"iso\",   area_select = NULL,   runstep,   global_fit = NULL,   hierarchical_level = c(\"intercept\", \"subcluster\", \"iso\"),   add_subnational_hierarchy = \"subnat\",   use_globalsubnat_fromnat = TRUE,   mu_isvector = FALSE,   chains = 4,   iter_sampling = 300,   iter_warmup = 150,   compile_model = TRUE,   force_recompile = FALSE,   seed = 1234,   refresh = 200,   adapt_delta = 0.9,   max_treedepth = 14 )"},{"path":"https://alkemalab.github.io/localhierarchy/reference/fit_model_localhierarchy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit localhierarchy example model — fit_model_localhierarchy","text":"survey_df tibble survey data y column name outcome, defaults y. area column name area observation (used geounit; iso subnational region) area_select area name use local run (eg iso code subnat region name) runstep Type run, defines model fitting step perform (see Details options). global_fit optional global fit object, used obtain fixed values use parameters current fit (see Details). hierarchical_level vector specifying hierarchical structure used mu add_subnational_hierarchy level added hierarchy subnational, defaults subnat use_globalsubnat_fromnat Logical, whether local subnational run, use global fit derived national data TRUE local subnat run, global_fit needs contain object fit_globalsubnat_fromnat mu_isvector Logical, TRUE mu vector, defaults FALSE Settings sampling chains number chains run iter_sampling number posterior samples draw iter_warmup number warmup iterations compile_model boolean indicator whether compile Stan model force_recompile boolean indicator whether force recompilation Stan model seed random seed refresh number iterations progress updates adapt_delta target acceptance rate -U-Turn Sampler max_treedepth maximum tree depth -U-Turn Sampler","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/fit_model_localhierarchy.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit localhierarchy example model — fit_model_localhierarchy","text":"List contains samples, stan_data, information relevant model fit (arguments), global fits, point estimates relevant parameters (post_summ). subnational global fits, list includes fit_globalsubnat_fromnat, global fit additional subnational sigmas added postsum object.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/fit_model_localhierarchy.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fit localhierarchy example model — fit_model_localhierarchy","text":"fit_model_localhierarchy function fits toy example hierarchical models/seq fitting. argument runstep determines type run perform. following run steps supported: \"global_national\": Fit global model. \"local_national\": Fit model data single country, using global_national fit. \"global_subnational\": Fit model global database subnational data, using global_national fit (NISE modeling). \"local_subnational\": Fit model subnational data single country region, using global_subnational fit. options also explained article package. Details hierarchical set ups used package allows structure hierarchical prior configured user  hierarchical_level argument. arguments expect character vector specifies nesting hierarchical structure. element vector must either \"intercept\" column name survey dataset, \"intercept\" add global intercept parameter. vector must descending order terms hierarchy: , starts \"intercept\" proceeds hierarchy. example, suppose fitting country-level data, dataset columns \"name_country\", \"name_sub_region\", \"name_region\" containing name country, sub-region, region observation belongs . specify parameter mu fitted hierarchical model countries nested within sub-regions within regions within world, use argument hierarchical_level = c(\"intercept\", \"name_region\", \"name_sub_region\", \"name_country\"). Optionally, model parameters can fixed values previous model fit provided via global_fit argument. typical use case, global_fit fit data many geographic units (e.g., countries), current fit uses data smaller number locations. using global_fit fix parameter values, exactly fixed determined runstep global_fit combi.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/get_geo_unit_index_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Get unique hierarchical levels from survey data — get_geo_unit_index_data","title":"Get unique hierarchical levels from survey data — get_geo_unit_index_data","text":"Get unique hierarchical levels survey data assign index \"c\" based area.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/get_geo_unit_index_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get unique hierarchical levels from survey data — get_geo_unit_index_data","text":"","code":"get_geo_unit_index_data(data, hierarchical_levels, area)"},{"path":"https://alkemalab.github.io/localhierarchy/reference/get_geo_unit_index_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get unique hierarchical levels from survey data — get_geo_unit_index_data","text":"data survey data interest contains hierarchical_column_names hierarchical_levels vector contains one specs hierarchical_level (incl intercept) area unit analysis (eg country subnational region)","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/get_geo_unit_index_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get unique hierarchical levels from survey data — get_geo_unit_index_data","text":"tibble unique hierarchical levels (one column level) index \"c\" assigned based area","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/get_geo_unit_index_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get unique hierarchical levels from survey data — get_geo_unit_index_data","text":"","code":"survey_dat <- tibble::tibble(subcluster = c(\"A\", \"A\", \"B\", \"B\"),     iso = c(\"iso1\", \"iso2\", \"iso3\", \"iso4\")) get_geo_unit_index_data(survey_dat,         hierarchical_levels = c(\"intercept\", \"subcluster\", \"iso\"),         area = \"iso\") #> # A tibble: 4 × 3 #>   subcluster iso       c #>   <chr>      <chr> <int> #> 1 A          iso1      1 #> 2 A          iso2      2 #> 3 B          iso3      3 #> 4 B          iso4      4"},{"path":"https://alkemalab.github.io/localhierarchy/reference/get_mu_raw_labeled.html","id":null,"dir":"Reference","previous_headings":"","what":"Get mu_raw_labeled — get_mu_raw_labeled","title":"Get mu_raw_labeled — get_mu_raw_labeled","text":"function extracts mu_raw_estimate samples fitted model labels hierarchical level.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/get_mu_raw_labeled.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get mu_raw_labeled — get_mu_raw_labeled","text":"","code":"get_mu_raw_labeled(fit, parname, morethan1param = FALSE)"},{"path":"https://alkemalab.github.io/localhierarchy/reference/get_mu_raw_labeled.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get mu_raw_labeled — get_mu_raw_labeled","text":"fit needs include parname_raw_estimate (example: mu_raw) parname selected parameter name (example: mu) morethan1param parname refer 1 parameter (vector)","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/get_mu_raw_labeled.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get mu_raw_labeled — get_mu_raw_labeled","text":"tibble samples parname_raw_estimate, including info hierarchical level","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/get_posterior_summaries_localhierarchy.html","id":null,"dir":"Reference","previous_headings":"","what":"Get posterior summaries for use in local models — get_posterior_summaries_localhierarchy","title":"Get posterior summaries for use in local models — get_posterior_summaries_localhierarchy","text":"Get posterior summaries set parameters use local model","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/get_posterior_summaries_localhierarchy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get posterior summaries for use in local models — get_posterior_summaries_localhierarchy","text":"","code":"get_posterior_summaries_localhierarchy(   fit,   params = c(\"mu_raw\", \"mu_sigma\", \"nonse\") )"},{"path":"https://alkemalab.github.io/localhierarchy/reference/get_posterior_summaries_localhierarchy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get posterior summaries for use in local models — get_posterior_summaries_localhierarchy","text":"fit fit object summarize params vector parnames summarize (w/o index)","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/get_posterior_summaries_localhierarchy.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get posterior summaries for use in local models — get_posterior_summaries_localhierarchy","text":"tibble variable (parname index used model) postmean (posterior mean)","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/get_posterior_summary_one_param.html","id":null,"dir":"Reference","previous_headings":"","what":"get_posterior_summary_one_param — get_posterior_summary_one_param","title":"get_posterior_summary_one_param — get_posterior_summary_one_param","text":"Get posterior summary one parameter","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/get_posterior_summary_one_param.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"get_posterior_summary_one_param — get_posterior_summary_one_param","text":"","code":"get_posterior_summary_one_param(fit, param_name)"},{"path":"https://alkemalab.github.io/localhierarchy/reference/get_posterior_summary_one_param.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"get_posterior_summary_one_param — get_posterior_summary_one_param","text":"fit fit object param_name parameter name w/o index need get estimate /fixed value indexed parameter difficulty = stacking estimate top fixed values (vector array) note get hierarchical info (hier nonhier param) just stacking","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/get_posterior_summary_one_param.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"get_posterior_summary_one_param — get_posterior_summary_one_param","text":"tibble variable (parname index used model) postmean (posterior mean)","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/hierarchical_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Create hierarchical data structure for a hierarchical model. — hierarchical_data","title":"Create hierarchical data structure for a hierarchical model. — hierarchical_data","text":"Create hierarchical data structure hierarchical model.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/hierarchical_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create hierarchical data structure for a hierarchical model. — hierarchical_data","text":"","code":"hierarchical_data(geo_unit_index_data, hierarchical_level)"},{"path":"https://alkemalab.github.io/localhierarchy/reference/hierarchical_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create hierarchical data structure for a hierarchical model. — hierarchical_data","text":"geo_unit_index_data tibble unique hierarchical levels (one column level) hierarchical_level vector hierarchical spec","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/hierarchical_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create hierarchical data structure for a hierarchical model. — hierarchical_data","text":"list model matrix info start end indices associated different levels","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/hierarchical_model_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Hierarchical model matrix — hierarchical_model_matrix","title":"Hierarchical model matrix — hierarchical_model_matrix","text":"Create list information including model matrix, associated geo_unit_data hierarchical_levels","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/hierarchical_model_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Hierarchical model matrix — hierarchical_model_matrix","text":"","code":"hierarchical_model_matrix(geo_unit_index_data, hierarchical_level)"},{"path":"https://alkemalab.github.io/localhierarchy/reference/hierarchical_model_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Hierarchical model matrix — hierarchical_model_matrix","text":"geo_unit_index_data tibble unique hierarchical levels (one column level, one row per combi) hierarchical_level vector hierarchical spec highest lowest levels","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/hierarchical_model_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Hierarchical model matrix — hierarchical_model_matrix","text":"list components modelmatrix, assign, index: modelmatrix: matrix column refers one eta (number rows equals number lowest level units). assign: Integer vector length equal number etas; 0 intercept, hierarchical level index (starting 2) eta level. index: tibble n_eta rows, columns: : Index eta column: Hierarchical level level: Name hierarchical level components associated provided geo_unit_data hierarchical_levels.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/hierarchical_param_stan_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Stan data for hierarchical parameters — hierarchical_param_stan_data","title":"Stan data for hierarchical parameters — hierarchical_param_stan_data","text":"Set data Stan related hierarchical parameters","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/hierarchical_param_stan_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Stan data for hierarchical parameters — hierarchical_param_stan_data","text":"","code":"hierarchical_param_stan_data(   param_name,   param_data,   global_fit = NULL,   hierarchical_terms_fixed,   hierarchical_sigmas_fixed )"},{"path":"https://alkemalab.github.io/localhierarchy/reference/hierarchical_param_stan_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Stan data for hierarchical parameters — hierarchical_param_stan_data","text":"param_name name parameter working , e.g. \"mu\" param_data Data structures constructed hierarchical_data parameter global_fit optional \"global\" fit used extract parameter estimates specified hierarchical units fix. Defaults NULL, fixing. hierarchical_terms_fixed character vector specifying hierarchical levels terms fixed (subset hierarchical_levels). Used global fit provided. hierarchical_sigmas_fixed character vector specifying hierarchical levels terms fixed (subset hierarchical_levels, intercept always included) Used global fit provided.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/hierarchical_param_stan_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Stan data for hierarchical parameters — hierarchical_param_stan_data","text":"named list Stan data relevant hierarchical set parameter, e.g. param_name \"mu\", mu_n_terms, mu_n_sigma, mu_re_start, mu_re_end, mu_model_matrix, mu_n_terms_fixed, mu_n_terms_estimate, mu_raw_fixed, mu_n_sigma_fixed, mu_n_sigma_estimate, mu_sigma_fixed","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/init_fun_localhierarchy.html","id":null,"dir":"Reference","previous_headings":"","what":"Set initial values — init_fun_localhierarchy","title":"Set initial values — init_fun_localhierarchy","text":"function sets initial values parameters simple hierarchical model.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/init_fun_localhierarchy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set initial values — init_fun_localhierarchy","text":"","code":"init_fun_localhierarchy(chain_id, stan_data)"},{"path":"https://alkemalab.github.io/localhierarchy/reference/init_fun_localhierarchy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set initial values — init_fun_localhierarchy","text":"chain_id chain ID, used setting seed stan_data list containing Stan data, obtain length parameter vectors","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/init_fun_localhierarchy.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set initial values — init_fun_localhierarchy","text":"list initial values model parameters","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/is_there_a_comma.html","id":null,"dir":"Reference","previous_headings":"","what":"Is there a comma? — is_there_a_comma","title":"Is there a comma? — is_there_a_comma","text":"comma?","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/is_there_a_comma.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Is there a comma? — is_there_a_comma","text":"","code":"is_there_a_comma(variable)"},{"path":"https://alkemalab.github.io/localhierarchy/reference/is_there_a_comma.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Is there a comma? — is_there_a_comma","text":"variable character string checked comma","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/is_there_a_comma.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Is there a comma? — is_there_a_comma","text":"Boolean","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/localhierarchy-package.html","id":null,"dir":"Reference","previous_headings":"","what":"localhierarchy: An R package to facilitate fitting of global and local Bayesian hierarchical models — localhierarchy-package","title":"localhierarchy: An R package to facilitate fitting of global and local Bayesian hierarchical models — localhierarchy-package","text":"LocalHierarchy package implements flexible set estimate parameters hierarchically carry local model fits, whereby higher-level parameters fixed.","code":""},{"path":[]},{"path":"https://alkemalab.github.io/localhierarchy/reference/localhierarchy-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"localhierarchy: An R package to facilitate fitting of global and local Bayesian hierarchical models — localhierarchy-package","text":"Maintainer: Leontine Alkema lalkema@umass.edu Authors: Shauna Mooney Evan Ray Herbert Susmann herbps10@gmail.com","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/param_array_to_indexed_df.html","id":null,"dir":"Reference","previous_headings":"","what":"Starting from an array of parameter values (of dimension 1 or 2), create a data frame with columns variable with the combined parameter name and indices, and mean with the parameter values — param_array_to_indexed_df","title":"Starting from an array of parameter values (of dimension 1 or 2), create a data frame with columns variable with the combined parameter name and indices, and mean with the parameter values — param_array_to_indexed_df","text":"Starting array parameter values (dimension 1 2), create data frame columns variable combined parameter name indices, mean parameter values","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/param_array_to_indexed_df.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Starting from an array of parameter values (of dimension 1 or 2), create a data frame with columns variable with the combined parameter name and indices, and mean with the parameter values — param_array_to_indexed_df","text":"","code":"param_array_to_indexed_df(param_values, num_inds, n, m, param_name)"},{"path":"https://alkemalab.github.io/localhierarchy/reference/param_array_to_indexed_df.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Starting from an array of parameter values (of dimension 1 or 2), create a data frame with columns variable with the combined parameter name and indices, and mean with the parameter values — param_array_to_indexed_df","text":"param_values Parameter values num_inds Dimension (1 2) n Number indices m dimension 2, number indices 2nd dimension param_name Parameter name","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/param_array_to_indexed_df.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Starting from an array of parameter values (of dimension 1 or 2), create a data frame with columns variable with the combined parameter name and indices, and mean with the parameter values — param_array_to_indexed_df","text":"Data frame columns variable combined parameter name indices, mean parameter values","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/plot_muraw_localhierarchy.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot prior and posterior densities of location parameters — plot_muraw_localhierarchy","title":"Plot prior and posterior densities of location parameters — plot_muraw_localhierarchy","text":"function plots posterior densities location (mu_raw) parameters, priors added.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/plot_muraw_localhierarchy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot prior and posterior densities of location parameters — plot_muraw_localhierarchy","text":"","code":"plot_muraw_localhierarchy(   fit,   parname,   morethan1param = FALSE,   nresultsperpage = 30 )"},{"path":"https://alkemalab.github.io/localhierarchy/reference/plot_muraw_localhierarchy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot prior and posterior densities of location parameters — plot_muraw_localhierarchy","text":"fit List includes \"parname\"_raw_estimate stan_data parname Selected parameter name (example: mu) morethan1param Logical, parname refer 1 parameter (vector) nresultsperpage Number results per page summary plots","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/plot_muraw_localhierarchy.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot prior and posterior densities of location parameters — plot_muraw_localhierarchy","text":"lists list 'summary_plots' list 'plots_allmuraw'. summary plots gives summary CIs, nresultsperpage time. plots_allmuraw gives individual plots mu_raw, density per chain prior added morethan1param = TRUE, list contains list per parameter k","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/plot_posterior_summaries_localhierarchy.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot summaries of hierarchical parameters — plot_posterior_summaries_localhierarchy","title":"Plot summaries of hierarchical parameters — plot_posterior_summaries_localhierarchy","text":"Display outputs posterior_summary_hierparam_localhierarchy","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/plot_posterior_summaries_localhierarchy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot summaries of hierarchical parameters — plot_posterior_summaries_localhierarchy","text":"","code":"plot_posterior_summaries_localhierarchy(   res,   hierarchy_select = NULL,   areas_select = NULL,   res2 = NULL,   modelname1 = \"model 1\",   modelname2 = \"model 2\",   k_select = NULL,   dodge = position_dodge(width = 0.5) )"},{"path":"https://alkemalab.github.io/localhierarchy/reference/plot_posterior_summaries_localhierarchy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot summaries of hierarchical parameters — plot_posterior_summaries_localhierarchy","text":"res output posterior_summary_hierparam_localhierarchy hierarchy_select optional, hierarchical level show? NULL, levels shown areas_select optional: specific areas level filter , allowed one hierarchical level selected res2 optional, output posterior_summary_hierparam_localhierarchy comparison modelname1 label res modelname2 label res2 k_select optional, res contains k, k values show? NULL, k values shown dodge used offsetting plots, default 0.5","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/plot_posterior_summaries_localhierarchy.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot summaries of hierarchical parameters — plot_posterior_summaries_localhierarchy","text":"ggplot object","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/plot_prior_post_sigmas_localhierarchy.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot prior and posteriors of sigmas from hierarchical models — plot_prior_post_sigmas_localhierarchy","title":"Plot prior and posteriors of sigmas from hierarchical models — plot_prior_post_sigmas_localhierarchy","text":"function plots prior posterior densities sigma_estimate parameters.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/plot_prior_post_sigmas_localhierarchy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot prior and posteriors of sigmas from hierarchical models — plot_prior_post_sigmas_localhierarchy","text":"","code":"plot_prior_post_sigmas_localhierarchy(fit, parname)"},{"path":"https://alkemalab.github.io/localhierarchy/reference/plot_prior_post_sigmas_localhierarchy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot prior and posteriors of sigmas from hierarchical models — plot_prior_post_sigmas_localhierarchy","text":"fit List, needs include parname_sigma_estimate stan_data parname Selected parameter name (example: \"mu\")","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/plot_prior_post_sigmas_localhierarchy.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot prior and posteriors of sigmas from hierarchical models — plot_prior_post_sigmas_localhierarchy","text":"Plot density sigma_estimate prior added","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/posterior_summary_hierparam_localhierarchy.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate posterior summaries for hierarchical parameters — posterior_summary_hierparam_localhierarchy","title":"Calculate posterior summaries for hierarchical parameters — posterior_summary_hierparam_localhierarchy","text":"Calculate posterior summaries hierarchical parameters","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/posterior_summary_hierparam_localhierarchy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate posterior summaries for hierarchical parameters — posterior_summary_hierparam_localhierarchy","text":"","code":"posterior_summary_hierparam_localhierarchy(   fit,   parname,   morethan1param = FALSE,   hierarchical_levels = fit$hierarchical_level )"},{"path":"https://alkemalab.github.io/localhierarchy/reference/posterior_summary_hierparam_localhierarchy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate posterior summaries for hierarchical parameters — posterior_summary_hierparam_localhierarchy","text":"fit needs include parname_star parname selected parameter name (example: \"mu\") morethan1param paramname refer 1 parameter (vector) hierarchical_levels specifies names hierarchical levels (defaults fit$hierarchical_level)","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/posterior_summary_hierparam_localhierarchy.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate posterior summaries for hierarchical parameters — posterior_summary_hierparam_localhierarchy","text":"list summaries mu hierarchical level (units level) mus obtained summing relevant etas morethan1param, level list k refers index","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/quantile_df.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute quantiles — quantile_df","title":"Compute quantiles — quantile_df","text":"function computes quantiles given vector returns tibble format.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/quantile_df.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute quantiles — quantile_df","text":"","code":"quantile_df(x, probs = c(0.025, 0.5, 0.975))"},{"path":"https://alkemalab.github.io/localhierarchy/reference/quantile_df.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute quantiles — quantile_df","text":"x vector values probs vector quantiles","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/quantile_df.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute quantiles — quantile_df","text":"tibble requested quantiles","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/simulate_multilevel_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate multilevel data — simulate_multilevel_data","title":"Simulate multilevel data — simulate_multilevel_data","text":"Simulates nested multilevel data structure. Lowest level can used observational error.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/simulate_multilevel_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate multilevel data — simulate_multilevel_data","text":"","code":"simulate_multilevel_data(   n_levels = 3,   n_units_perlevel = rep(25, n_levels),   sigma_perlevel = rep(1, n_levels),   mu_global = 0,   add_data = TRUE,   n_data = 10,   sigma_y = 0.05,   add_data1levelup = FALSE,   seed = 12345 )"},{"path":"https://alkemalab.github.io/localhierarchy/reference/simulate_multilevel_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate multilevel data — simulate_multilevel_data","text":"n_levels Number hierarchical levels (default: 3). n_units_perlevel vector specifying number units level (default: rep(25, n_levels)). sigma_perlevel vector specifying standard deviation etas level (default: rep(1, n_levels)). mu_global Global mean outcome variable (default: 0). add_data Logical indicating whether add observations (default: TRUE). TRUE, adds column y. n_data Number observations add lowest level (default: 10). sigma_y Standard deviation added observations (default: 0.05) add_data1levelup Logical indicating whether add observations one level e.g. national level lowest level subnational (default: FALSE). seed Random seed reproducibility (default: 1234).","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/simulate_multilevel_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate multilevel data — simulate_multilevel_data","text":"tibble columns level, mu_global, etas, total labeled y","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/split_var_name_and_index.html","id":null,"dir":"Reference","previous_headings":"","what":"Split variable name and index — split_var_name_and_index","title":"Split variable name and index — split_var_name_and_index","text":"data frame estimates column contains combined info variable name row /column indices, add columns containing just variable name indices.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/split_var_name_and_index.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Split variable name and index — split_var_name_and_index","text":"","code":"split_var_name_and_index(estimate_df, num_inds)"},{"path":"https://alkemalab.github.io/localhierarchy/reference/split_var_name_and_index.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Split variable name and index — split_var_name_and_index","text":"estimate_df data frame column called variable contains parname[] parname[,j] entries num_inds number indices variable name (used 1 2)","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/split_var_name_and_index.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Split variable name and index — split_var_name_and_index","text":"data frame columns estimate_df plus columns containing just variable name indices.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/summary_df.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute summaries — summary_df","title":"Compute summaries — summary_df","text":"function computes posterior summaries given vector returns tibble format.","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/summary_df.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute summaries — summary_df","text":"","code":"summary_df(x)"},{"path":"https://alkemalab.github.io/localhierarchy/reference/summary_df.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute summaries — summary_df","text":"x vector values","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/summary_df.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute summaries — summary_df","text":"tibble 2.5th quantile, posterior mean, 97.5th quantile, quant = c(0.025, 0.5, 0.975)","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/variable_exists_in_draws.html","id":null,"dir":"Reference","previous_headings":"","what":"Determine whether or not a variable exists in draws from a fit This is similar to the function posterior:::check_existing_variables, but note that function is not exported from posterior — variable_exists_in_draws","title":"Determine whether or not a variable exists in draws from a fit This is similar to the function posterior:::check_existing_variables, but note that function is not exported from posterior — variable_exists_in_draws","text":"Determine whether variable exists draws fit similar function posterior:::check_existing_variables, note function exported posterior","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/variable_exists_in_draws.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Determine whether or not a variable exists in draws from a fit This is similar to the function posterior:::check_existing_variables, but note that function is not exported from posterior — variable_exists_in_draws","text":"","code":"variable_exists_in_draws(fit, var_name)"},{"path":"https://alkemalab.github.io/localhierarchy/reference/variable_exists_in_draws.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Determine whether or not a variable exists in draws from a fit This is similar to the function posterior:::check_existing_variables, but note that function is not exported from posterior — variable_exists_in_draws","text":"fit fpemplus fit object var_name name variable character string","code":""},{"path":"https://alkemalab.github.io/localhierarchy/reference/variable_exists_in_draws.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Determine whether or not a variable exists in draws from a fit This is similar to the function posterior:::check_existing_variables, but note that function is not exported from posterior — variable_exists_in_draws","text":"TRUE FALSE indicating whether variable exists fit.","code":""}]
